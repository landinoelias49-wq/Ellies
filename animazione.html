<!DOCTYPE html>
<html lang="it">
<head>
<meta charset="UTF-8">
<title>Gioco dei Gavettoni</title>
<style>
    body { margin: 0; }
    canvas {
        background: skyblue;
        display: block;
        margin: auto;
    }
</style>
</head>
<body>

<canvas id="game" width="600" height="400"></canvas>

<script>
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");

let ellies = { x: 300, y: 300, size: 30 };
let gavettoni = [];
let torri = [
    {x:100, y:50, h:100},
    {x:300, y:30, h:130},
    {x:500, y:70, h:110}
];

document.addEventListener("keydown", e => {
    if(e.key === "ArrowLeft") ellies.x -= 10;
    if(e.key === "ArrowRight") ellies.x += 10;
    if(e.key === " ") gavettoni.push({x: ellies.x, y: ellies.y});
});

function loop() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);

    // Disegna Ellies
    ctx.fillStyle = "green";
    ctx.fillRect(ellies.x - 15, ellies.y - 15, 30, 30);

    // Disegna le torri
    ctx.fillStyle = "purple";
    torri.forEach(t => {
        ctx.fillRect(t.x, t.y, 40, t.h);
    });

    // Disegna i gavettoni
    ctx.fillStyle = "blue";
    gavettoni.forEach((g, index) => {
        g.y -= 5;
        ctx.beginPath();
        ctx.arc(g.x, g.y, 8, 0, Math.PI * 2);
        ctx.fill();
        // Rimuovi gavettoni fuori dal canvas
        if(g.y < 0) gavettoni.splice(index, 1);
    });

    requestAnimationFrame(loop);
}

loop();
</script>

</body>
</html>
